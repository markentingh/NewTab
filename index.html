<!DOCTYPE html>
<html lang="en-US">
    <head>
        <title>New Tab</title>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,width=device-width,height=device-height,user-scalable=yes" />
        <link rel="stylesheet" type="text/css" href="/tapestry.css"/>
        <link id="themecss" rel="stylesheet" type="text/css" href="/themes/pearl.css"/>
        <script>
            (function(){
                //load theme based on query string  ///////////////////////////////////////////////////
                function getParameterByName(name, url) {
                    if (!url) url = window.location.href;
                    name = name.replace(/[\[\]]/g, "\\$&");
                    var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                        results = regex.exec(url);
                    if (!results) return null;
                    if (!results[2]) return '';
                    return decodeURIComponent(results[2].replace(/\+/g, " "));
                }

                var themeName = getParameterByName('theme');
                if(themeName != null && themeName != ''){
                    var themecss = document.getElementById('themecss');
                    themecss.href = themecss.href.replace('pearl', themeName);
                }
                ///////////////////////////////////////////////////////////////////////////////////////
            })();
        </script>
        <style type="text/css">
            body{background-color:#e0e0e0 !important; background-image:url(/images/mesas.jpg) !important; background-attachment: fixed !important;}
            #svglist{display:none;}
            #apps{width:100%;}
            #apps > .col{text-align:center; padding:30px;}
            #apps > .col a{text-decoration:none;}
            #apps > .col img{width:100%;}
            #apps > .col span{font-family:helvetica, arial; font-size:22px; font-weight:400; color:#333 !important; text-overflow:ellipsis; color:#fff !important;}

            .search-bar{width:100%; padding:50px 30px 10px 30px; box-sizing:border-box;}
            .search-bar input{width:100%; max-width:500px;}

            .search-bar input::-webkit-input-placeholder,
            .search-bar input::-moz-placeholder,
            .search-bar input:-ms-input-placeholder,
            .search-bar input:-moz-placeholder {font-style:italic; }

            /* responsive icons ////////////////////////////////// */

            @media(max-width:1768px){
                #apps > .col span{font-size:17px;}
            }

            @media(max-width:1600px){
                #apps > .col{padding:30px;}
            }

            @media(max-width:1440px){
                #apps > .col{padding:40px;}
            }


            @media(max-width:870px){
                #apps > .col{padding:30px;}
            }

            @media(max-width:800px){
                #apps > .col span{font-size:16px;}
                #apps > .col{padding:25px;}
            }

            @media(max-width:426px){
                #apps > .col{padding:40px;}
            }
        </style>
    </head>
    <body class="box hidden">
        <div id="app">
            <div class="col {{hd-size}} desktop-two laptop-five-total tablet-three tablet-sm-four mobile-six flexed">
                <a href="{{url}}">
                    <img {{icon}}>
                    <span>{{title}}</span>
                </a>
            </div>
        </div>
        <div id="apps" class="flex"></div>

        <!-- javascript libraries /////////////////////////////////////////////////////////-->
        <script type="text/javascript" src="/js/tapestry.js"></script>

        <!-- //////////////////////////////////////////////////////////////////////////////-->
        <!-- Javascript Initial Page Load Rendering ///////////////////////////////////////-->
        <script>
            var d = document;

            (function(){ //contained
                var htm = '';
                var html = [];
                var body = d.getElementsByTagName('body')[0];
                var divapp = d.getElementById('app');
                var divapps = d.getElementById('apps');
                var apps = [
                    {
                        title:'Trello',
                        developer:'Trello',
                        icon:'trello.png',
                        url:'https://www.trello.com'
                    },
                    {
                        title:'Evernote',
                        developer:'Evernote',
                        icon:'evernote.png',
                        url:'https://www.evernote.com'
                    },
                    {
                        title:'Gmail',
                        developer:'Google',
                        icon:'google_gmail.png',
                        url:'https://www.gmail.com'
                    },
                    {
                        title:'YouTube',
                        developer:'Google',
                        icon:'google_youtube.png',
                        url:'https://www.youtube.com'
                    },
                    {
                        title:'Google Maps',
                        developer:'Google',
                        icon:'google_maps.png',
                        url:'https://www.google.com/maps'
                    },
                    {
                        title:'Google Drive',
                        developer:'Google',
                        icon:'google_drive.png',
                        url:'https://www.google.com/drive'
                    },
                    {
                        title:'Google Calendar',
                        developer:'Google',
                        icon:'google_calendar.png',
                        url:'https://www.google.com/calendar'
                    },
                    {
                        title:'Google Plus',
                        developer:'Google',
                        icon:'google_plus.png',
                        url:'https://www.google.com/plus'
                    },
                    {
                        title:'Google Hangouts',
                        developer:'Google',
                        icon:'google_hangouts.png',
                        url:'https://www.google.com/hangouts'
                    },
                    {
                        title:'Facebook',
                        developer:'Facebook',
                        icon:'facebook.png',
                        url:'https://www.facebook.com/warhero'
                    },
                    {
                        title:'Instagram',
                        developer:'Facebook',
                        icon:'instagram.png',
                        url:'https://www.instagram.com'
                    },
                    {
                        title:'Netflix',
                        developer:'Netflix',
                        icon:'netflix.jpg',
                        url:'https://www.netflix.com'
                    },
                    {
                        title:'Crunchy Roll',
                        developer:'Crunchy Roll',
                        icon:'crunchyroll.png',
                        url:'https://www.crunchyroll.com'
                    },
                    {
                        title:'Feedly',
                        developer:'Feedly',
                        icon:'feedly.png',
                        url:'https://www.feedly.com'
                    },
                    {
                        title:'Wells Fargo',
                        developer:'Wells Fargo',
                        icon:'wellsfargo.png',
                        url:'https://www.wellsfargo.com'
                    },
                    {
                        title:'Mint',
                        developer:'Mint',
                        icon:'mint.png',
                        url:'https://www.mint.com'
                    },
                    {
                        title:'Weather Underground',
                        developer:'WU',
                        icon:'wundermap2.png',
                        url:'https://www.wunderground.com/'
                    },
                    {
                        title:'GitHub',
                        developer:'Github',
                        icon:'github.png',
                        url:'https://www.github.com/websilk/home'
                    },
                    {
                        title:'Amazon AWS',
                        developer:'Amazon',
                        icon:'amazon_aws.png',
                        url:'https://us-west-2.console.aws.amazon.com/console/home?region=us-west-2'
                    }
                    /*,
                    {
                        title:'Amazon',
                        developer:'Amazon',
                        icon:'amazon.png',
                        url:'https://www.amazon.com'
                    },
                    {
                        title:'eBay',
                        developer:'eBay',
                        icon:'ebay.png',
                        url:'https://ebay.com'
                    }*/
                ];

                //load list of apps on page
                var hdsize = 'hd-nine-total';

                for(var x = 0; x < apps.length; x++){

                    if(x == 8){ hdsize = 'hd-ten-total'; }

                    htm +=
                        divapp.innerHTML
                        .replace('{{title}}', apps[x].title)
                        .replace('{{developer}}', apps[x].developer)
                        .replace('{{icon}}', 'src="/icons/' + apps[x].icon + '"')
                        .replace('{{url}}', apps[x].url)
                        .replace('{{hd-size}}', hdsize);
                }
                divapps.innerHTML = htm;

                //finally, show the body of the web page
                body.className = body.className.replace(' hidden','');
                divapp.parentNode.removeChild(divapp);

            })(); //end contained function

            /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
            // internal Demo functions //////////////////////////////////////////////////////////////////////////////////////////
            /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

            function loadPage(name, hasjs){
                var xobj = new XMLHttpRequest();
                xobj.open('GET', 'pages/'+name+'.html', true);
                xobj.onreadystatechange = function () {
                    if (xobj.readyState == 4 && xobj.status == "200") {
                        getElementsByClassName(d, 'dash-body')[0].innerHTML = xobj.responseText;
                        if(hasjs == true){
                            //remove old page script (if exists)
                            var old = d.getElementById("pagejs");
                            if(old){
                                d.head.removeChild(old);
                            }
                            //add new page script
                            var script = d.createElement('script');
                            script.id = 'pagejs';
                            script.src = 'pages/'+name+'.js';
                            //script.onload = function () {};
                            d.head.appendChild(script);
                        }
                    }
                };
                xobj.send(null);
            }

            function addHtm(parent, el, str, classes, styles) {
                var div = d.createElement(parent);
                if(classes != null){
                    div.className = classes;
                }
                if(styles != null){
                    div.setAttribute('style', styles);
                }
                div.innerHTML = str;
                el.appendChild(div);
            }

            function replace(str, find, rpl){
                return str.replace(new RegExp(find, 'g'), rpl);
            }

            //renders a scaffolding template, replacing scaffold elements with variables (e.g. "{{label}}"" ), and also
            //showing or hiding blocks of HTML between scaffold element blocks  (e.g. "{{my-block}}<img src="#"/>{{/my-block}}" )
            function renderTemplate(htm, elements){
                var find = [0,0,0,0];
                var ischanged = true;
                for(var x = 0; x < elements.length; x++){
                    ischanged = true;
                    while(ischanged == true){
                        ischanged = false;
                        //check for scaffold closing first
                        find[0] = htm.indexOf(elements[x][0].replace('{{','{{/'));
                        if(htm.indexOf(elements[x][0].replace('{{','{{/')) >= 0){
                            //found a group of html to show or hide based on scaffold element boolean value
                            find[1] = htm.indexOf("}}", find[0]);
                            if(find[1] > 0){
                                //find beginning of tag
                                find[2] = htm.indexOf(elements[x][0]);
                                find[3] = htm.indexOf("}}", find[2]);
                                if(find[2] >= 0){
                                    if(elements[x][1] === false){
                                        //hide group of html
                                        htm = htm.substr(0, find[2]) + htm.substr(find[1]+2);
                                        ischanged = true;
                                    }else if(elements[x][1] === true){
                                        //show group of html
                                        htm = htm.substr(0, find[2]) + htm.substr(find[3]+2, find[0] - (find[3]+2)) + htm.substr(find[1]+2);
                                        ischanged = true;
                                    }
                                }
                            }
                        }
                        //check for scaffold element to replace with a value
                        if(ischanged == false){
                            if(htm.indexOf(elements[x][0]) >= 0){
                                htm = htm.replace(elements[x][0], elements[x][1]);
                                ischanged = true;
                            }
                        }
                    }
                }
                return htm;
            }

            function getElementsByClassName(node,classname) {
                if (node.getElementsByClassName) { // use native implementation if available
                    return node.getElementsByClassName(classname);
                } else {
                    return (function getElementsByClass(searchClass,node) {
                        if ( node == null )
                        node = d;
                        var classElements = [],
                            els = node.getElementsByTagName("*"),
                            elsLen = els.length,
                            pattern = new RegExp("(^|\\s)"+searchClass+"(\\s|$)"), i, j;

                        for (i = 0, j = 0; i < elsLen; i++) {
                        if ( pattern.test(els[i].className) ) {
                            classElements[j] = els[i];
                            j++;
                        }
                        }
                        return classElements;
                    })(classname, node);
                }
            }

            function lineChart(type){
                switch(type){
                    case "analytics":

                }
            }
        </script>
    </body>

</html>
